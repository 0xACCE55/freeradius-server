#
#  Virtual server for the RADIUS protocol.
#
server default {
	namespace = radius

	listen {
		type = Access-Request
	}

	recv Access-Request {
		update control {
			&Password.Cleartext := 'hello'
		}

		#
		# Include the test file specified by the
		# KEYWORD environment variable.
		#
		$INCLUDE ${keyword}/$ENV{KEYWORD}

		if (&control.Password.Cleartext) {
			pap
		}
		else {
			accept
		}
	}

	authenticate pap {
		pap
	}
}

server second {
	namespace = radius

	listen {
		type = Access-Request
	}

	recv Access-Request {
		update reply {
			&Reply-Message := "call second"
		}

		accept
	}
}
