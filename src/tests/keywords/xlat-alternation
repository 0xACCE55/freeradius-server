#
# PRE:
#

&Tmp-String-0 := "foo"
&Tmp-String-1 := "bar"

#
#  First choice
#
&Tmp-String-2 := "%{%{Tmp-String-0[0]}:-%{Tmp-String-1[0]}}"
if (&Tmp-String-2[0] != 'foo') {
	fail
}

#
#  Second choice
#
&request -= &Tmp-String-0[*]
&Tmp-String-2 := "%{%{Tmp-String-0[0]}:-%{Tmp-String-1[0]}}"
if (&Tmp-String-2[0] != 'bar') {
	fail
}

#
#  Multiple things in an alternation
#
&Tmp-String-2 := "%{%{Tmp-String-0[0]}:-%{Tmp-String-1[0]} foo}"
if (&Tmp-String-2[0] != 'bar foo') {
	fail
}

#
#  Everything null
#
&request -= &Tmp-String-1[*]
&Tmp-String-2 := "%{%{Tmp-String-0[0]}:-%{Tmp-String-1[0]}}"
if (!&Tmp-String-2[0] || (&Tmp-String-2[0] != "")) {
	fail
}

success
