.TH vmpsd.conf 5 "28 May 2007" "" "FreeRADIUS VMPSd configuration file"
.SH NAME
vmpsd.conf \- configuration file for the VMPSd server
.SH DESCRIPTION
The \fBvmpsd.conf\fP file resides in the \fB/etc/raddb\fP directory.
It defines the global configuration for the VMPSd server.
.SH INTRODUCTION
The file is very similar in form to that of the \fBradiusd.conf\fP, as
the vmps server is really a RADIUS server that also handles VMPS.

This documentation page explains the VMPS-specific portions of the
configuration file, and how those portions differ from a
\fBradiusd.conf\fP file.
.SH VMPS CONFIGURATION
When a VMPS request is received by the server, it is processed through
a "vmps" section.  In RADIUS, requests are processed through
"authorize", "authenticate", etc.

.DS
	vmps {
.br
		module1
.br
		module2
.br
		...
.br
	}
.DE

Proxying of requests is supported, as are the "pre-proxy" and
"post-proxy" sections.  However, any VMPS requests will be proxied as
RADIUS packets, and not VMPS packets.  This is because the server is
still, at heart, a RADIUS server.
.SH "CONTENTS"
There are a large number of configuration parameters for the server.
Most are documented in the file itself as comments.  This page
documents only the format of the file.  Please read the
\fBvmpsd.conf\fP file itself for more information.

The configuration file parser is independent of the server
configuration.  This means that you can put almost anything into the
configuration file.  So long as it is properly formatted, the server
will start.

When the server parses the configuration file, it looks only for those
configurations it understands.  Extra configuration items are ignored.
This "feature" can be (ab)used in certain interesting ways.
.SH "FILE FORMAT"
The file format is line-based, like many other Unix configuration
files.  Each entry in the file must be placed on a line by itself,
although continuations are supported.

The file consists of configuration items (variable = value pairs),
sections, and comments.
.IP Variables
Variables can be set via:

.DS
.br
	name = value
.DE

Single and double-quoted strings are permitted:

.DS
.br
	string1 = "hello world"
.br
	string2 = 'hello mom'
.DE
.IP Sections
A section begins with a section name, followed on the same line by an
open bracket '\fB{\fP'.  Section may contain other sections, comments, or
variables.  Sections may be nested to any depth, limited
only by available memory.  A section ends with a close bracket
'\fB}\fP', on a line by itself.

.DS
.br
	section {
.br
		...
.br
	}
.DE

Sections can sometimes have a second name following the first one.
The situations where this is legal depend on the context.  See the
examples and comments in the \fBvmpsd.conf\fP file for more
information.

.DS
.br
	section foo {
.br
		...
.br
	}
.DE
.IP Comments
Any line beginning with a (\fB#\fP) is deemed to be a comment, and is
ignored.  Comments can appear after a variable or section definitions.

.DS
.br
	# comment
.br
	foo = bar # set variable 'foo' to value 'bar'
.br
	section {	# start of section
.br
	...
.br
	}		# end of section
.DE
.IP Continuations
Long lines can be broken up via continuations, using '\\' as the last
character of the line.  For example, the following entry:

.DS
.br
	foo = "blah \\
.br
	blah \\
.br
	blah"
.DE

will set the value of the variable "foo" to "blah blah blah".  Any CR
or LF is not turned into a space, but all other whitespace is
preserved in the final value.
.SH "REFERENCES"
The value of a variable can reference another variable.  These
references are evaluated when the configuration file is loaded, which
means that there is no run-time cost associated with them.  This
feature is most useful for turning long, repeated pieces of text into
short ones.

Variables are referenced by ${variable_name}, as in the following examples.

.DS
	foo = bar       # set variable 'foo' to value 'bar'
.br
	who = ${foo}    # sets variable 'who' to value of variable 'foo'
.br
	my = "${foo} a" # sets variable 'my' to "bar a"
.DE

If the variable exists in a section or subsection, it can be
referenced as ${section.subsection.variable}.  Forward references are
not allowed.  Relative references are allowed, by pre-pending the name
with one or more period.

.DS
	blogs = ${.foo}

.DE
Will set variable \fBblogs\fP to the value of variable \fBfoo\fP,
from the current section.

.DS
	blogs = ${..foo}

.DE
Will set variable \fBblogs\fP to the value of variable \fBfoo\fP, from the
section which contains the current section.

.DS
	blogs = ${modules.detail.detailfile}

.DE
Will set variable \fBblogs\fP to the value of variable \fBdetailfile\fP,
of the \fBdetail\fP module, which is in the \fBmodules\fP section of
the configuration file.
.SH FILES
/etc/raddb/vmpsd.conf
.SH "SEE ALSO"
.BR vmpsd (8),
.BR radiusd.conf (5)
.SH AUTHOR
Alan DeKok <aland@deployingradius.com>
